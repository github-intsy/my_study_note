<details><summary>目录</summary>

- [什么是事务？](#什么是事务)
- [为什么会出现事务？](#为什么会出现事务)
- [了解事务引擎](#了解事务引擎)
- [事务基本操作](#事务基本操作)
- [事务异常](#事务异常)
  - [自动提交](#自动提交)


</details>

## 什么是事务？
事务就是为了完成实际事件中由**一条或多条**sql语句构成的集合体。这一组sql语句要么全部成功，要么全部失败。

## 为什么会出现事务？
>事务被 MySQL 编写者设计出来,本质是为了当应用程序访问数据库的时候,事务能够简化我们的编程模型,不需要我们去考虑各种各样的潜在错误和并发问题.可以想一下当我们使用事务时,要么提交,要么回滚,我们不会去考虑网络异常了,服务器宕机了,同时更改一个数据怎么办对吧?因此事务本质上是为了应用层服务的.而不是伴随着数据库系统天生就有的.

## 了解事务引擎
```sql
show engines;
-- 查看各引擎是否支持事务

show variables like 'autocommit';
-- 查看事务自动提交
set autocommit=0;   --设置事务自动提交关闭
set autocommit=1;   --设置事务自动提交打开

show processlist;   --查看有多少用户访问当前数据库
```
> - DEFAULT默认支持事务
> - Innodb支持事务
> - Myism不支持

## 事务基本操作
```sql
start transaction; --开始一个事务
begin              --开始一个事务

savepoint save1;    --创建一个保存点save1

rollback to save1;  --回滚到保存点save1
rollback;           --回滚到事务刚开始

commit;             --结束一个事务
-- 如果事务提交后，无法回滚
```
## 事务异常
>事务执行过程中系统异常断开，事务执行就会自动回滚。\
使用commit提交事务后，即使异常情况断开连接，也不会回滚。`保证原子性`

### 自动提交
>mysql默认单sql语句是一个事务

如果打开自动提交，就是默认执行commit提交记录。\
当系统崩溃时，自动执行commit提交记录

如果关闭自动提交，当系统崩溃时，由于没有自动提交，不会执行commit，自动回滚到事务开始。