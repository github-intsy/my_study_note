### 流程
1. RCC开启时钟,开启GPIO和定时器的时钟
2. 配置GPIO,需要把PA6和PA7配置成输入模式
3. 配置时基单元,预分频器选择不分频,自动重装选择最大值65535
4. 配置输入捕获单元,滤波器和极性
5. 配置编码器接口模式
6. 调用TIM_Cmd启动定时器

### 库函数配置
|函数名|参数|功能|
|---|---|---|
|TIM_EncoderInterfaceConfig|TIMx,TIM_EncoderMode(编码器模式),TIM_IC1Polarity,TIM_IC2Polarity(选择通道1和通道2的极性)|

### 模式选择
- 上拉输入模式
  - 如果外部模式空闲状态默认是高电平,就选择上拉输入模式
- 下拉输入模式
  - 如果外部模块空闲状态默认输出低电平,就配置下拉输入,默认低电平
- 浮空输入模式
  - 如果不确定外部模块输出的默认状态,或者外部信号输出功率非常小,就尽量选择浮空输入
  - 缺点: 当引脚悬空时,没有默认电平,输入会受噪声干扰,来回不断地跳变

### Init函数
1. 开启GPIOA和TIM3时钟通道
2. 初始化GPIO,上拉输入模式,使用定时器3,PA6和PA7
3. 不需要定时器内部时钟配置,因为编码器接口会托管时钟,编码器接口就是一个带方向控制的外部时钟
4. 配置时基单元TIM_BaseInit,不需要配置计数器模式,因为计数方向也是被编码器接口托管的,自动重装值给65536-1(计数范围,是满量程,方便计数);预分频给0,就是不分频,编码器的时钟直接驱动计数器
5. 配置输入捕获单元选择上升沿触发
   1. 注意这里的上升沿触发不是上升沿有效,而是高低电平不翻转,给下降沿就是反相
   2. 需要同时配置通道一和通道二
6. 配置编码器接口TIM_EncoderInterfaceConfig
   1. 选择TI12都计数
   2. 选择TIM3
   3. 选择Falling(反相)或者Rising(不反相)
7. TIM_Cmd启动定时器
### Get函数
1. 如果想要编码器计数,就直接输入`TIM_GetCounter`获取
2. 想要获得旋转速率就每次取得`CNT(TIM_GetCounter)`就将其置零,每一秒读取一下数据,读到的数据就是秒数