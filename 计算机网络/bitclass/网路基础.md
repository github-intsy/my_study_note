
## IP地址和mac地址
- IPv4地址是`4个字节`, `32个比特位`
- IPv6地址是`16个字节`, `128个比特位`

>- mac地址只能在局域网中使用
>- mac地址表示下一个节点和上一个节点, 是实时动态的
>- ip地址既能在广域网中使用, 也能在局域网中使用
>- ip地址是源地址到目的地址, 表示一整个路径的终点和节点, 是静态的

## 协议结构
||
|---|
|用户层|
|传输层|
|网络层|
|数据链路层|
|物理层|

>- 数据链路层对应着网卡等驱动设备
>- 传输层和网络层对应着OS应该完成的工作
>- 传输层和网络层的OS应该对用户层提供对应的函数调用

## 源IP地址和目的IP地址
在IP数据包中头部中，有两个IP地址，分别叫做源IP地址，和目的IP地址

为了更好地表示一台主机上服务器进程的唯一性，我们采用`端口号port`，标识服务器进程，客户端进程的唯一性

## 认识端口号
端口号（port）是传输层协议内容
>- 端口号是一个2字节16位的整数
>- 端口号用来标识一个进程，告诉OS，当前的这个数据要交给哪一个进程来处理
>- IP地址+端口号能够标识网络上的某一台主机的某一个进程
>- 一个端口号只能被一个进程占用, 一个进程可以绑定多个端口号

    网络通信的本质：是进程间通信
1. 需要让不同的进程，先看到同一份资源--网络
2. 通信就是在做IO操作
   1. 所以，我们所有上网的行为就是两种
      1. 我发数据
      2. 接收别人发给我的数据
3. IP保证全网（广域网）唯一，端口号保证主机内部唯一
4. 进程已经有pid了，为什么要有port呢？
   1. 系统是系统，网络是网络，单独设置--保证系统和网络解耦
   2. 客户端每次都能找到服务器进程--服务器的唯一性，不能改变`IP+port`， 所以需要使用不能被轻易改变的值
   3. 不是所有的进程都需要提供网络服务或者请求，但是所有进程都需要PID

### OS如何通过port找到pid对应进程？
OS维护一个`port`值和`task_struct(PCB)`的映射`hash`

一个进程不仅需要将数据发送给对方, 还需要将自己的IP和port发送给对方, 用来后续对方能回发数据

## 认识TCP
>- 传输层协议
>- 有连接
>- 可靠传输
>- 面向字节流
## 认识UDP
>- 传输层协议
>- 无连接
>- 不可靠传输
>- 面向数据报

## 网络字节序
存在大端机和小端机, 但是网络中不确定, 所以规定只能按照大端机发送数据 **大小端是按字节为单位**

>- 硬件上默认发送内存地址由低到高
>- 接收主机也按内存地址从低到高保存
>- 所以网络规定先发出来的地址是低地址, 后发出的数据是高地址
>- TCP/IP协议规定, 网络数据应采用端字节序,即低地址高字节
>- 不管这台主机是大端机还是小端机, 都会按照这个TCP/IP规定的网络字节序来发送/接收数据
>- 如果当前发送主机是小端, 就需要将数据转成大端; 否则忽略

## 套接字
- 网络套接字(网络和本地通信)
- 原始套接字()
- unix域间套接字(只能本地通信)\
.......
