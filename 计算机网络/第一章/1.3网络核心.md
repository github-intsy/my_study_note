- [分组交换](#分组交换)
  - [存储转发传输](#存储转发传输)
  - [排队时延和分组丢失](#排队时延和分组丢失)
  - [转发表和路由选择协议](#转发表和路由选择协议)
- [电路交换](#电路交换)
  - [电路交换网络中的复用](#电路交换网络中的复用)
  - [网络的网络](#网络的网络)

## 分组交换
端系统彼此之间交换报文, 报文可以执行一种控制功能, 也可以包含数据。
### 存储转发传输
    存储转发是指: 
    交换机开始向输出链路传输该分组的第一个比特之前
    必须接收到整个分组
### 排队时延和分组丢失
    交换机具有一个输出缓存, 也被称为输出队列

输出队列用于存储**路由器**准备发往那条链路的**分组**

如果到达的分组需要发送到某条链路, 而该条链路正在忙于传送其他分组, 就需要将该分组置于输出缓冲区中等待\
这部分等待的时间,就被称为**等待时延**

缓冲区的大小是有限的, 一个到达的分组发现该缓冲区已经充满了, 这种情况下就会出现**分组丢失(丢包)**
### 转发表和路由选择协议
    每个端系统具有一个称为IP地址的地址

    源在分组的首部中包括了目的地的IP地址(具有等级结构)
    当一个分组到达网络当中的路由器时, 路由器检查该分组的目的地址的一部分
    并向一台邻近路由器转发该分组
---
## 电路交换
    在端系统通信会话期间, 预留了端系统间沿路径通信所需要的资源(缓存, 链路传输速率)

能够确保发送方能够以恒定的速率向接收方传送数据

网络必须为两个端系统之间预留一条电路。

### 电路交换网络中的复用
    链路中的电路是通过频分复用(FDM)或时分复用(TDM)来实现的。

- **FDM**：链路的频谱由跨越链路创建的所有连接共享，连接期间，为每条连接专设一个频段。\
  频段的宽度被称为**带宽**。
- **TDM**：时间被划分为固定时段的**帧**，每个帧被划分为固定数量的**时隙**。当网络跨越一条链路创建一条连接时，网络在每个帧中为该连接指定一个时隙，一个时隙可以传输该连接的数据。



|电路交换|分组交换|
|---|---|
|不考虑需求,预先分配了传输链路|按需分配链路|

### 网络的网络
    用户接入ISP, 因特网需要将数以亿计的用户互联
    也就是说ISP自身需要做到互联

|网络结构|内容/作用|缺点|
|---|---|---|
|网络结构1|用单一的全球传输ISP互联所有接入ISP<br>预想为一个路由器连接全球所有用户和通信链路|将耗资巨大|
|网络结构2|由数十万接入ISP和多个全球传输ISP组成<br>可以根据价格和服务因素在多个全球传输提供商之间进行选择|所有的全球传输ISP之间必须能进行通信|
|网络结构3|第一层由多个**全球传输ISP**组成, 给定的区域有**区域ISP**, 用户与区域ISP相连, 区域ISP则与第一层ISP相连||
|网络结构4|在网络结构3的基础上增加`存在点PoP、多宿、对等和因特网交换点`<br><li>PoP：指用户可以租用第三方的高速链路，以此连接到提供商的PoP节点（使客户网络可以使用提供商的路由器，以此来获得更好的网络效果）<li>多宿：当一个ISP为多宿时，即使提供商之一出现故障，它依然可以在因特网中发送和接收分组。<li>对等：相同等级结构层次的邻近的一对ISP能对等，也就是将他们的网络直接连接在一起（不用向对方付费），不用通过中心服务器进行数据传输，可以去中心化，分布式计算，资源共享。<li>英特网交换点IXP：使多个ISP能够在一起对等。||
|网络结构5|在网络结构4的基础上增加了`内容提供商网络`<br>**内容提供商网络**：也就是数据中心<li>可以直接与较低层ISP对等（无结算）<li>或在IXP处与其连接<li>有些较低层也与第一层ISP链接，因此也与第一层ISP连接<br>通过创建自己的网络，内容提供商不仅减少了向顶层ISP支付的费用，而且对其服务最终如何交付给端系统用户有了更多的控制。||

用户和内容提供商是较低层ISP的客户,较低层ISP是较高层ISP的客户