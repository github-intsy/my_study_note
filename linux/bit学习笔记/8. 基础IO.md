<details><summary>目录</summary>

- [目录概念](#目录概念)
- [文件理解](#文件理解)
- [文件描述符](#文件描述符)
- [重定向](#重定向)


</details>

## 目录概念
在`/proc/pid(进程号)/`的路径下可以查看cwd工作路径和exe执行文件路径

在创建自己的bash界面使用`cd ..`后, `cd`修改的只是**子进程**的工作路径\
在子进程调用完`cd`后, 子进程销毁, 在`pwd`查看的是新创建的子进程的工作路径

所以如果是`cd`命令, 不需要创建子进程, 让shell自己执行对应的命令(chdir()),

- 像这种不需要让我们的子进程来执行, 而是让shell自己执行的命令, 叫做 --- 内建/内置命令


## 文件理解
- 对文件的操作 -- 本质: 进程对被打开文件的操作
- 一个文件要被访问, 就必须先被访问
- 用户进程调用OS接口打开文件, `OS+进程`
- 文件操作的本质
  - 进程和被打开文件的关系


多行处理操作\
命令行模式下, `ctrl+q`, `I插入`, `输入//`后`esc退出`

|库函数接口|系统调用接口|
|---|---|
|`fopen` `fcolse` `fwrite` `fread` `fseek`|`open` `colse` `write` `read` `lseek`|

文件描述符默认封装了三个标准流, stdin, stdout, stderr\
也就是stdin->fileno ...

文件描述符的本质就是**数组下标**

文件在创建时, 会受到linux系统中umask的影响

|open参数|作用|
|---|---|
|O_CREAT|如果没有文件, 就创建一个|
|O_TRUNC|刷新文件内容|
|O_WRONLY|读写方式打开(read, write, only)|

## 文件描述符
分配规则:\
从小到大,按照顺序寻找最小的且没有被占用的fd

|描述符fd|作用|
|---|---|
|0|标准输入stdin|
|1|标准输出stdout|
|2|标准错误stderr|

如果在文件中使用`open`创建文件之前, 使用`close`关闭了`1`文件, 此时打开文件获取的`fd`就是**最小的没有被占用的fd**, 也就是1\
由于1是stdout, 当1被新建文件使用时, 使用printf后, `stdout->fd->1`, **输出内容不再打印在屏幕上, 而是打印在获取fd->1的文件中**, (每次显示需要使用fflush刷新缓存区)

## 重定向
本质: 上层用的`fd`不变, 在内核中更改对应的`struct file*` 的地址

`int dup2(int oldfd, int newfd)`将两个文件描述符下标**里面的内容**相互拷贝